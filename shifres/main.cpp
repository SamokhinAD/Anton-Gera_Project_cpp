/**
 * @file main.cpp
 * @brief Главная программа для работы с различными шифрами
 * @details Это основная программа, которая позволяет выбрать один из трёх шифров:
 *          аффинный, Виженера или RSA. После выбора запускается соответствующий
 *          алгоритм шифрования. Управление происходит через нажатие клавиш
 */

#include <iostream>
#include <limits>
#include <conio.h>
#include "Affin_Shifr.h"
#include "Vij.h"
#include "RSA.h"

/**
 * @brief Главная функция программы - точка входа
 * @return 0 при успешном завершении программы
 * @details Показывает меню выбора шифров и ждёт нажатия клавиш:
 *          - 1: запускает аффинный шифр
 *          - 2: запускает шифр Виженера  
 *          - 3: запускает RSA
 *          - Esc: выход из программы
 */
int main() {
    setlocale(LC_ALL, "en_US.UTF-8");

    std::cout << "Выберите шифр:\n";
    std::cout << "1. Аффинный шифр\n";
    std::cout << "2. Шифр Виженера по лозунгу\n";
    std::cout << "3. RSA\n";
    std::cout << "0. Выход\n";
    std::cout << "Введите номер (0-3): ";

    /** @brief Флаг для отслеживания первого нажатия клавиши (чтобы не реагировать на повторные) */
    int flag = 1;
    while (true){
        if (_kbhit()) {
            /** @brief Код нажатой клавиши */
            int num = _getch();
            /** @brief Выход из программы при нажатии Esc (код 27) */
            if(num == 27){break;}
            if(flag == 1){
                /** @brief Запуск аффинного шифра при нажатии '1' (код 49) */
                if(num == 49){
                    std::cout << "\n";
                    flag = 0;
                    main_Aff("-1", "-1", "-1", 0);
                }
                /** @brief Запуск шифра Виженера при нажатии '2' (код 50) */
                if(num == 50){
                    std::cout << "\n";
                    flag = 0;
                    main_Vij("-1", "-1", "-1", 0);
                }
                /** @brief Запуск RSA при нажатии '3' (код 51) */
                if(num == 51){
                    std::cout << "\n";
                    flag = 0;
                    main_RSA("-1", -1, -1, 0);
                }
            }
        }
    }
    return 0;
}